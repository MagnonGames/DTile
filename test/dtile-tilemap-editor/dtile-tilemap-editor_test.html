<!doctype html>

<html>
	<head>
		<title>dtile-tilemap-editor test</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
		<script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
		<script src="../../../web-component-tester/browser.js"></script>

		<link rel="import" href="../../src/dtile-tilemap-editor/dtile-tilemap-editor.html">
	</head>
	<body>
		<test-fixture id="basic">
			<template>
				<dtile-tilemap-editor></dtile-tilemap-editor>
			</template>
		</test-fixture>

		<script>
			/* eslint-env mocha */
			/* globals fixture, expect */
			describe("dtile-tilemap-editor", function() {
				it("instantiates correctly", function() {
					const element = fixture("basic");
					expect(element.is).to.equal("dtile-tilemap-editor");
				});

				it("scrolls properly when zoomed in", () => {
					const element = fixture("basic").$.renderer;
					const event = new WheelEvent("wheel", { deltaX: -2, deltaY: -2 });
					element.zoom = 1;
					element.dispatchEvent(event);

					expect(element.panX).to.be.below(0);
					expect(element.panY).to.be.below(0);
				});
				it("scrolls properly when zoomed out", () => {
					const element = fixture("basic").$.renderer;
					const event = new WheelEvent("wheel", { deltaX: -2, deltaY: -2 });
					element.zoom = 0;
					element.dispatchEvent(event);

					expect(element.panX).to.be.below(0);
					expect(element.panY).to.be.below(0);
				});

				it("zooms in properly", () => {
					const element = fixture("basic").$.renderer;
					const event = new WheelEvent("wheel", { deltaY: 2, ctrlKey: true });
					element.zoom = 1;
					element.dispatchEvent(event);

					expect(element.zoom).to.be.below(1);
				});
				it("zooms out properly", () => {
					const element = fixture("basic").$.renderer;
					const event = new WheelEvent("wheel", { deltaY: -2, ctrlKey: true });
					element.zoom = 0;
					element.dispatchEvent(event);

					expect(element.zoom).to.be.above(0);
				});
			});
		</script>
	</body>
</html>
