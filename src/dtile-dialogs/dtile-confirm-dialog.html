<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<dom-module id="dtile-confirm-dialog">
	<template>
		<paper-dialog id="dialog" with-backdrop>
			<h2>[[prompt]]</h2>
			<div>[[message]]</div>
			<div class="buttons">
				<paper-button dialog-dismiss on-tap="_decline">Cancel</paper-button>
				<paper-button dialog-confirm disabled="[[!_renameInputValid]]"
					on-tap="_confirm">[[action]]</paper-button>
			</div>
		</paper-dialog>
	</template>

	<script>
		Polymer({
			is: "dtile-confirm-dialog",

			properties: {
				prompt: String,
				message: String,
				action: String
			},

			// Action is the confirm buttons label
			requestConfirmation(prompt, message, action) {
				this.prompt = prompt;
				this.message = message;
				this.action = action;

				return new Promise((resolve, reject) => {
					this.$.dialog.open();

					this._resolve = resolve;
					this._reject = reject;
				});
			},

			_confirm() {
				this._resolve();
				this._reset();
			},

			_decline() {
				this._reject();
				this._reset();
			},

			_reset() {
				this.prompt = "";
				this.message = "";
				this.action = "";

				this._resolve = null;
				this._reject = null;
			}
		});
	</script>
</dom-module>
