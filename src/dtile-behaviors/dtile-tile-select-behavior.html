<script>
	window.DTile = window.DTile || {};

	window.DTile.TileSelectBehavior = {
		properties: {
			currentSelection: {
				type: Array,
				value: () => [],
				readOnly: true,
				notify: true
			},
			previousSelection: {
				type: Array,
				value: () => [],
				readOnly: true,
				notify: true
			}
		},

		listeners: {
			select: "_handleSelect"
		},

		deselectTiles(positions) {
			this.splice("previousSelection", 0, this.previousSelection.length, ...this.currentSelection);
			if (!positions) {
				this.splice("currentSelection", 0, this.currentSelection.length);
			} else {
				positions.forEach(deselectPos => {
					this.currentSelection.forEach((selectedPos, i) => {
						if (deselectPos.x === selectedPos.x &&
							deselectPos.y === selectedPos.y) {
							this.splice("currentSelection", i, 1);
						}
					});
				});
			}
		},

		selectTiles(positions) {
			this.splice("previousSelection", 0, 0, ...this.currentSelection);
			this.splice("currentSelection", this.currentSelection.length, 0, ...positions);
		}
	};
</script>
