<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/all-imports.html">

<dom-module id="dtile-shell-main-drawer">
    <template>
        <style>
            nav {
                color: var(--primary-text-color);
            }

            hr {
                height: 0;
                border: none;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
            }
        </style>

        <nav>
            <paper-icon-item on-tap="navigate" path="projects">
                <iron-icon icon="dashboard" slot="item-icon"></iron-icon>
                All projects
            </paper-icon-item>
            <hr>
            <paper-icon-item on-tap="openMapExporter" path="project">
                <iron-icon icon="file-download" slot="item-icon"></iron-icon>
                Export Map
            </paper-icon-item>
        </nav>
    </template>
</dom-module>

<script>
    class DTileShellMainDrawer extends Polymer.Element {
        static get is() { return "dtile-shell-main-drawer"; }

        navigate(e) {
            // Push path, update app-location in dtile-app
            history.pushState(null, null, `/${e.target.getAttribute("path")}`);
            window.dispatchEvent(new CustomEvent("location-changed"));
        }

        openMapExporter() {
            window.dispatchEvent(new CustomEvent("dtile-map-export-request", {
                bubbles: true
            }));
            this.close();
        }

        close() {
            this.dispatchEvent(new CustomEvent("dtile-drawer-close"));
        }
    }

    customElements.define(DTileShellMainDrawer.is, DTileShellMainDrawer);
</script>
