<dom-module id="dtile-action-manager">
	<template>
		<style>
			:host {
				display: none;
			}
		</style>
	</template>

	<script>
		Polymer({
			is: "dtile-action-manager",

			properties: {
				_actionLog: {
					type: Array,
					value: []
				},
				_pointer: {
					type: Number,
					value: -1
				}
			},

			add(action) {
				this._actionLog.splice(
					Math.max(this._pointer, 0),
					this._actionLog.length - this._pointer - 1
				);
				this._actionLog.push(action);
				this._pointer++;
			},

			undo() {
				if (this._pointer >= 0) {
					this._getCurrentAction().reverse();

					this._pointer--;
				}
			},

			redo() {
				if (this._pointer + 1 < this._actionLog.length) {
					this._pointer++;

					this._getCurrentAction().apply();
				}
			},

			_getCurrentAction() {
				return this._actionLog[this._pointer];
			}
		});
	</script>
</dom-module>
